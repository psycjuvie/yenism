<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>yenism</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-black text-white font-mono">
    <div class="max-w-4xl mx-auto px-4 py-10">
        <div class="flex items-center justify-between mb-6">
            <div class="text-xl tracking-wide">yenism</div>
            <div class="text-xs opacity-70">hooks + tools</div>
        </div>

        <div class="grid gap-4 md:grid-cols-2">
            <div class="rounded-2xl border border-white/20 bg-white/5 p-4">
                <div class="text-xs opacity-70 mb-2">extra info</div>
                <textarea id="extra"
                    class="w-full rounded-xl bg-black/60 border border-white/20 px-3 py-2 text-sm outline-none focus:border-white/40 min-h-[110px]"
                    placeholder="optional direction, mood, idea, or constraint"></textarea>

                <div class="mt-3">
                    <button id="random_hook"
                        class="rounded-xl border border-white/20 px-3 py-2 text-sm hover:border-white/40">random
                        hook</button>
                </div>

                <div id="status" class="mt-4 text-xs opacity-70 min-h-[16px]"></div>
            </div>

            <div class="rounded-2xl border border-white/20 bg-white/5 p-4">
                <div class="text-xs opacity-70 mb-2">other</div>
                <textarea id="other_q"
                    class="w-full rounded-xl bg-black/60 border border-white/20 px-3 py-2 text-sm outline-none focus:border-white/40 min-h-[180px]"
                    placeholder="ask anything with lyrics attached"></textarea>

                <div class="mt-2 flex gap-2">
                    <button id="other_go"
                        class="rounded-xl border border-white/20 px-3 py-2 text-sm hover:border-white/40">run</button>
                    <button id="clear"
                        class="rounded-xl border border-white/20 px-3 py-2 text-sm hover:border-white/40">clear</button>
                </div>

                <pre id="output"
                    class="mt-4 rounded-xl border border-white/20 bg-black/40 p-3 whitespace-pre-wrap leading-relaxed text-sm min-h-[260px]"></pre>
            </div>
        </div>
    </div>

    <script>
        const extra = document.getElementById("extra")
        const other_q = document.getElementById("other_q")
        const output = document.getElementById("output")
        const status = document.getElementById("status")

        function set_status(t) {
            status.textContent = (t || "").toLowerCase()
        }

        function set_output(t) {
            output.textContent = t || ""
        }

        document.getElementById("random_hook").onclick = async () => {
            set_status("generating hook...")
            set_output("")
            const res = await fetch("/hook", {
                method: "post",
                headers: { "content-type": "application/json" },
                body: JSON.stringify({ extra: extra.value || "" })
            })
            const data = await res.json()
            set_output(data.text || "")
            set_status("done.")
        }

        document.getElementById("other_go").onclick = async () => {
            const q = (other_q.value || "").trim()
            if (!q) return set_status("type something first.")
            set_status("running...")
            set_output("")
            const res = await fetch("/other", {
                method: "post",
                headers: { "content-type": "application/json" },
                body: JSON.stringify({ q })
            })
            const data = await res.json()
            set_output(data.text || "")
            set_status("done.")
        }

        document.getElementById("clear").onclick = () => {
            set_output("")
            set_status("")
        }
    </script>
</body>

</html>
